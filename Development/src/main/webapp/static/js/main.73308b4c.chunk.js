(this["webpackJsonptaut-app"]=this["webpackJsonptaut-app"]||[]).push([[0],{21:function(e,t,n){},26:function(e,t,n){e.exports=n(38)},31:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),o=n(23),r=n.n(o),c=(n(31),n(1)),l=n(2),i=n(4),u=n(3),p=n(5),m=n(11),h=n(10),g=(n(21),n(13)),E=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={value:""},n.handleChange=n.handleChange.bind(Object(g.a)(n)),n.handleLogin=n.handleLogin.bind(Object(g.a)(n)),n.handleCreate=n.handleCreate.bind(Object(g.a)(n)),n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"handleLogin",value:function(e){e.preventDefault();var t=JSON.stringify({type:"USER_SERVICE",contentType:"LOGIN",content:this.state.value});console.log("Logging in as %s",this.state.value),this.props.send(t)}},{key:"handleCreate",value:function(e){e.preventDefault();var t=JSON.stringify({type:"USER_SERVICE",contentType:"USER_CREATE",content:this.state.value});console.log("Creating new user: %s",this.state.value),this.props.send(t)}},{key:"render",value:function(){return null!==this.props.username?s.a.createElement(h.a,{to:"/chat"}):s.a.createElement("div",{className:"section is-fullheight"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"column is-4 is-offset-4"},s.a.createElement("div",{className:"box"},s.a.createElement("form",{onSubmit:this.handleLogin},s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"User Name"),s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input",type:"text",name:"username",autoComplete:"off",onChange:this.handleChange}))),s.a.createElement("div",{className:"buttons is-grouped"},s.a.createElement("button",{type:"button",className:"button is-block is-info is-fullwidth",onClick:this.handleLogin},"Login"),s.a.createElement("button",{type:"button",className:"button is-block is-info is-fullwidth",onClick:this.handleCreate},"Create")))))))}}]),t}(s.a.Component),f=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={display:"TautChat"},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e){if(this.props.username!==e.username){var t="Hi, "+this.props.username+"!";this.setState({display:t})}}},{key:"render",value:function(){return s.a.createElement("header",null,s.a.createElement("h1",{class:"title is-1"},this.state.display),s.a.createElement(m.b,{to:"/"},"Home")," | "," ",s.a.createElement(m.b,{to:"/chat"},"Chat")," | "," ",s.a.createElement(m.b,{to:"/about"},"About"))}}]),t}(a.Component),S=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"getStyle",value:function(){return{fontSize:"12px",padding:"30px"}}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{style:this.getStyle()},s.a.createElement("p",null,"TautChat was established in 2019 by 4 dashing young professionals looking to expand their careers into the world of software development. They would like to thank to the following people for their support during development:"),s.a.createElement("p",null,"Michael Weintraub"),s.a.createElement("p",null,"Vaibhav Dave"),s.a.createElement("p",null,"Alex Grob")))}}]),t}(a.Component),d=n(19),C=n(15),b=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={content:""},n.onChange=function(e){return n.setState(Object(C.a)({},e.target.name,e.target.value))},n.onSubmit=function(e){e.preventDefault(),n.props.addMessage(n.state.content),n.setState({content:""})},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement("form",{onSubmit:this.onSubmit,style:{display:"flex"}},s.a.createElement("input",{type:"text",name:"content",placeholder:"Type Message Here",style:{flex:"10",padding:"5px"},autoComplete:"off",value:this.state.content,onChange:this.onChange}),s.a.createElement("button",{type:"submit",class:"button is-dark"},"Submit"))}}]),t}(a.Component),y=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).getStyle=function(e){return n.props.username===e?{fontSize:"20px",textAlign:"right",padding:"10px"}:{fontSize:"20px",textAlign:"left",padding:"10px"}},n.getNameStyle=function(e){return{fontSize:"14px",padding:"1px"}},n.getFontStyle=function(e){switch(e.charAt(0)){case"0":return{color:"#FF0000"};case"1":return{color:"#696969"};case"2":return{color:"#7CFC00"}}},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.message,t=e.from,n=(e.to,e.content),a=e.sentiment;return s.a.createElement("div",{style:this.getStyle(t)},s.a.createElement("p",{style:this.getNameStyle()},t),s.a.createElement("p",{style:this.getFontStyle(a)},n))}}]),t}(a.Component),v=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).filtered=function(e){var t,a=n.props.messageWith,s=n.props.username;return n.props.groups.includes(a)?(console.log("Filtering Group"),t=e.filter((function(e){return e.to===a}))):(console.log("Filtering Direct"),t=e.filter((function(e){return e.from===s||e.from===a})).filter((function(e){return e.to===s||e.to===a}))),t},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return this.filtered(this.props.messages).map((function(t){return s.a.createElement(y,{message:t,filterMessages:e.filterMessages,username:e.props.username,messageWith:e.props.messageWith})}))}}]),t}(a.Component),O=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={messageWith:""},n.onChange=function(e){n.setState(Object(C.a)({},e.target.name,e.target.value),(function(){n.props.setTo(n.state.messageWith)}))},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"getStyle",value:function(){return{textAlign:"left"}}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("h1",{class:"subtitle is-3",style:this.getStyle()},this.props.messageWith))}}]),t}(a.Component),R=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).setMessageWith=function(e){n.props.setTo(e)},n.filtered=function(e){return e.filter((function(e){return e!==n.props.username}))},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return this.filtered(this.props.users).map((function(t){return s.a.createElement("li",null,s.a.createElement("button",{class:"button is-white is-fullwidth",onClick:function(){return e.setMessageWith(t)}},t))}))}}]),t}(a.Component),A=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).setGroup=function(e){n.props.setTo(e)},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return this.props.groups.map((function(t){return s.a.createElement("li",null,s.a.createElement("button",{class:"button is-white is-fullwidth",onClick:function(){return e.setGroup(t)}},t))}))}}]),t}(a.Component),U=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={messageWith:"",messages:[],users:["Phil","Karen","Carl","Mike","Felipe","George","Sara","Max"],groups:["Kitty Lovers","Science Project","Taut Admins"]},n.filterMessages=function(){if(n.state.groups.includes(n.state.messageWith)){var e=n.state.messageWith,t=(n.props.username,n.state.messages.filter((function(t){return t.to===e})));n.setState({messages:t})}else{var a=n.state.messageWith,s=n.props.username,o=n.state.messages.filter((function(e){return e.from===s||e.from===a})).filter((function(e){return e.to===s||e.to===a}));n.setState({messages:o})}},n.addToChatBox=function(e){n.setState({messages:[].concat(Object(d.a)(n.state.messages),[e])},(function(){n.filterMessages()}))},n.setTo=function(e){n.setState({messageWith:e})},n.addMessage=function(e){if(n.state.groups.includes(n.state.messageWith))var t=JSON.stringify({type:"BROADCAST_MESSAGE",from:n.props.username,to:n.state.messageWith,contentType:"GROUP_MESSAGE",content:e});else if(n.state.users.includes(n.state.messageWith))t=JSON.stringify({type:"BROADCAST_MESSAGE",from:n.props.username,to:n.state.messageWith,contentType:"ASCII",content:e});n.props.send(t)},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this;this.props.queuedMessage!==e.queuedMessage&&this.setState({messages:[].concat(Object(d.a)(this.state.messages),[this.props.queuedMessage])},(function(){console.log(t.state.messages)}))}},{key:"componentDidMount",value:function(){}},{key:"sendSearchForUsernameMessage",value:function(e){var t=JSON.stringify({type:"USER_SERVICE",contentType:"SEARCH_USERS_BY_NAME",content:e});this.props.send(t)}},{key:"render",value:function(){return null===this.props.username?s.a.createElement(h.a,{to:"/"}):s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"columns is-mobile"},s.a.createElement("div",{className:"column is-narrow"},s.a.createElement("h1",{class:"title"},"Users"),s.a.createElement(s.a.Fragment,null,s.a.createElement(R,{users:this.state.users,setTo:this.setTo,username:this.props.username})),s.a.createElement("h1",{class:"title"},"Groups"),s.a.createElement(s.a.Fragment,null,s.a.createElement(A,{groups:this.state.groups,setTo:this.setTo}))),s.a.createElement("div",{className:"column"},s.a.createElement(s.a.Fragment,null,s.a.createElement(O,{messageWith:this.state.messageWith}),s.a.createElement(v,{messages:this.state.messages,username:this.props.username,messageWith:this.state.messageWith,groups:this.state.groups}),s.a.createElement(b,{addMessage:this.addMessage})))))}}]),t}(a.Component),j={LOGIN:"LOGIN",USER_CREATE:"USER_CREATE",SEARCH_USERS_BY_NAME:"SEARCH_USERS_BY_NAME",FRIEND_USER:"FRIEND_USER"};function M(e){e.contentType==j.LOGIN&&function(e){e.content.includes(G.SUCCESS)?(console.log("SUCCESS: User successfully logged into session."),alert("User successfully logged into session.")):e.content.includes(G.FAILURE)&&(console.log("ERROR: User Name Does not Exist. Please Create User First."),alert("User Name Does not Exist. Please Create User First."))}(e),e.contentType==j.USER_CREATE&&function(e){e.content.includes(G.SUCCESS)?(console.log("User Successfully Created!"),alert("User Successfully Created!")):e.content.includes(G.FAILURE)&&(console.log("ERROR: Could Not Create User Name. Please Try Another Name."),alert("This User Name is already taken. Please Try Another Name."))}(e),e.contentType,j.SEARCH_USERS_BY_NAME}var k={ASCII:"ASCII",GROUP_MESSAGE:"GROUP_MESSAGE"};function N(e){console.log("I got something to use"),console.log(e)}var _,T={USER_SERVICE:"USER_SERVICE",SESSION_SERVICE:"SESSION_SERVICE",GROUP_SERVICE:"GROUP_SERVICE",GROUP_MESSAGE:"GROUP_MESSAGE",DIRECT_MESSAGE:"DIRECT_MESSAGE",BROADCAST_MESSAGE:"BROADCAST_MESSAGE"},G={SUCCESS:"SUCCESS",FAILURE:"FAILURE"};function I(e){console.log("General message router"),console.log(e),e.type==T.BROADCAST_MESSAGE&&(console.log("I'm going to go process this broadcast"),function(e){e.type==T.BROADCAST_MESSAGE?N(e):e.type==T.DIRECT_MESSAGE&&(e.contentType==k.GROUP_MESSAGE||N(e))}(e)),e.from==T.USER_SERVICE&&M(e)}function w(){if(console.log("Checking Socket Connection"),"undefined"===typeof _){console.log("Connecting to Socket");document.location.host,document.location.pathname;(_=new WebSocket("ws://localhost:8080/prattle/chat/")).onopen=function(){console.log("Connection open!"),!0},_.onclose=function(e){console.log("websocket closing. Code:",e),!1},_.onerror=function(e){console.log("Websocket Error"),console.log("Error Code: ",e.data)},_.onmessage=function(e){console.log("Received Message"),I(JSON.parse(e.data))}}}var D=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={ws:"",username:null,active_socket:!1,authenticated:!0,queuedMessage:""},n.connect=function(){var e=n.state.ws;n.state.active_socket;if(console.log("Checking Socket Connection"),""===n.state.ws){console.log("Connecting to Socket");document.location.host,document.location.pathname;e=new WebSocket("ws://localhost:8080/prattle/chat/"),n.setState({ws:e}),e.onopen=function(){console.log("Connection open!"),n.setState({active_socket:!0})},e.onclose=function(e){console.log("websocket closing. Code:",e),n.setState({active_socket:!1}),n.setState({ws:""})},e.onerror=function(e){console.log("Websocket Error"),console.log("Error Code: ",e.data)},e.onmessage=function(e){console.log("Received Message"),n.generalMessageRouter(JSON.parse(e.data))}}},n.send=function(e){var t=n.state.ws;n.state.active_socket?t.send(e):(w(),setTimeout((function(){t.send(e)}),500))},n.generalMessageRouter=function(e){console.log(e),"BROADCAST_MESSAGE"==e.type&&n.chatMessageRouter(e),"USER_SERVICE"==e.from&&n.userServiveMessageRouter(e)},n.chatMessageRouter=function(e){"BROADCAST_MESSAGE"==e.type?n.processDirectChatMessage(e):"DIRECT_MESSAGE"==e.type&&n.processDirectChatMessage(e)},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.connect()}},{key:"processDirectChatMessage",value:function(e){console.log(e),this.setState({queuedMessage:e})}},{key:"processGroupMessage",value:function(e){console.log(e),this.setState({queuedMessage:e})}},{key:"userServiveMessageRouter",value:function(e){"LOGIN"==e.contentType&&this.processLoginResponse(e),"USER_CREATE"==e.contentType&&this.processUserCreateResponse(e)}},{key:"processLoginResponse",value:function(e){e.content.includes("SUCCESS")?(this.setState({username:e.to}),console.log(e),console.log("SUCCESS: User successfully logged into session."),this.setState({authenticated:!0})):e.content.includes("FAILURE")&&(alert("User Name Does not Exist. Please Create User First."),console.log("ERROR: User Name Does not Exist. Please Create User First."))}},{key:"processUserCreateResponse",value:function(e){e.content.includes("SUCCESS")?(alert("User successfully created. Please log in to continue"),console.log("User Successfully Created!")):e.content.includes("FAILURE")&&(alert("Could Not Create User Name. Please Try Another Name."),console.log("ERROR: Could Not Create User Name. Please Try Another Name."))}},{key:"render",value:function(){var e=this;return s.a.createElement(m.a,{basename:"prattle"},s.a.createElement("div",{className:"App"},s.a.createElement("div",{className:"container"},s.a.createElement(f,{username:this.state.username}),s.a.createElement(h.b,{exact:!0,path:"/",render:function(t){return s.a.createElement(E,Object.assign({},t,{connect:e.connect,send:e.send,username:e.state.username}))}}),s.a.createElement(h.b,{path:"/about",component:S}),s.a.createElement(h.b,{path:"/chat/:messageWith?",render:function(t){return s.a.createElement(U,Object.assign({},t,{connect:e.connect,send:e.send,username:e.state.username,queuedMessage:e.state.queuedMessage}))}}))))}}]),t}(a.Component);n(37);r.a.render(s.a.createElement(D,null),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.73308b4c.chunk.js.map