(this["webpackJsonptaut-app"]=this["webpackJsonptaut-app"]||[]).push([[0],{21:function(e,t,n){},37:function(e,t,n){e.exports=n(70)},42:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),o=n(33),c=n.n(o),r=(n(42),n(1)),l=n(2),i=n(4),u=n(3),g=n(5),m=n(11),p=n(12),h=(n(21),n(14)),E={LOGIN:"LOGIN",USER_CREATE:"USER_CREATE",SEARCH_USERS_BY_NAME:"SEARCH_USERS_BY_NAME",FRIEND_USER:"FRIEND_USER"};function S(e){e.contentType==E.LOGIN&&function(e){e.content.includes(k.SUCCESS)?(console.log("SUCCESS: User successfully logged into session."),alert("User successfully logged into session.")):e.content.includes(k.FAILURE)&&(console.log("ERROR: User Name Does not Exist. Please Create User First."),alert("User Name Does not Exist. Please Create User First."))}(e),e.contentType==E.USER_CREATE&&function(e){e.content.includes(k.SUCCESS)?(console.log("User Successfully Created!"),alert("User Successfully Created!")):e.content.includes(k.FAILURE)&&(console.log("ERROR: Could Not Create User Name. Please Try Another Name."),alert("This User Name is already taken. Please Try Another Name."))}(e),e.contentType,E.SEARCH_USERS_BY_NAME}var f=n(36),d=n(16),C=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={content:""},n.onChange=function(e){return n.setState(Object(d.a)({},e.target.name,e.target.value))},n.onSubmit=function(e){e.preventDefault(),n.props.addMessage(n.state.content),n.setState({content:""})},n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement("form",{onSubmit:this.onSubmit,style:{display:"flex"}},s.a.createElement("input",{type:"text",name:"content",placeholder:"Type Message Here",style:{flex:"10",padding:"5px"},value:this.state.content,onChange:this.onChange}),s.a.createElement("input",{type:"submit",value:"Submit",className:"btn",style:{flex:"1"}}))}}]),t}(a.Component),b=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).getStyle=function(e){return n.props.username===e?{fontSize:"20px",textAlign:"right",padding:"10px"}:{fontSize:"20px",textAlign:"left",padding:"10px"}},n.getNameStyle=function(e){return{fontSize:"14px",padding:"1px"}},n.getFontStyle=function(e){var t=e.charAt(0);switch(console.log(t),t){case"0":return{color:"#FF0000"};case"1":return{color:"#696969"};case"2":return{color:"#7CFC00"}}},n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.message,t=e.from,n=(e.to,e.content),a=e.sentiment;return console.log(a),s.a.createElement("div",{style:this.getStyle(t)},s.a.createElement("p",{style:this.getNameStyle()},t),s.a.createElement("p",{style:this.getFontStyle(a)},n))}}]),t}(a.Component),y=(n(43),n(61),function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return this.props.messages.map((function(t){return s.a.createElement(b,{message:t,filterMessages:e.filterMessages,username:e.props.username,messageWith:e.props.messageWith})}))}}]),t}(a.Component)),v=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={messageWith:""},n.onChange=function(e){n.setState(Object(d.a)({},e.target.name,e.target.value),(function(){n.props.setTo(n.state.messageWith)}))},n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement("form",{style:{display:"flex"}},s.a.createElement("input",{type:"text",name:"messageWith",placeholder:"Who To Message",style:{flex:"10",padding:"5px"},value:this.state.messageWith,onChange:this.onChange}))}}]),t}(a.Component),O=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.user.from;return s.a.createElement("div",null,s.a.createElement("p",null,e))}}]),t}(a.Component),R=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return this.props.users.map((function(t){return s.a.createElement(O,{user:t,username:e.props.username})}))}}]),t}(a.Component),A=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={messageWith:"",messages:[],users:[],groups:[]},n.filterMessages=function(){var e=n.state.messageWith,t=n.props.username;console.log("Starting filtered messages"),console.log(n.state.messages);var a=n.state.messages.filter((function(n){return n.from===t||n.from===e})).filter((function(n){return n.to===t||n.to===e}));console.log(a),n.setState({messages:a})},n.addToChatBox=function(e){n.setState({messages:[].concat(Object(f.a)(n.state.messages),[e])},(function(){n.filterMessages()}))},n.setTo=function(e){n.setState({messageWith:e})},n.addMessage=function(e){var t=JSON.stringify({type:"BROADCAST_MESSAGE",from:n.props.username,to:n.state.messageWith,contentType:"ASCII",content:e});console.log(t),n.props.send(t)},n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.queuedMessage!==e.queuedMessage&&this.addToChatBox(this.props.queuedMessage)}},{key:"componentDidMount",value:function(){console.log(this.props.username)}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(R,{users:this.state.users}),s.a.createElement(v,{setTo:this.setTo}),s.a.createElement(y,{messages:this.state.messages,username:this.props.username,messageWith:this.state.messageWith}),s.a.createElement(C,{addMessage:this.addMessage}))}}]),t}(a.Component),j={ASCII:"ASCII",GROUP_MESSAGE:"GROUP_MESSAGE"};function U(e){console.log("I got something to use"),console.log(e)}var M,_={USER_SERVICE:"USER_SERVICE",SESSION_SERVICE:"SESSION_SERVICE",GROUP_SERVICE:"GROUP_SERVICE",GROUP_MESSAGE:"GROUP_MESSAGE",DIRECT_MESSAGE:"DIRECT_MESSAGE",BROADCAST_MESSAGE:"BROADCAST_MESSAGE"},k={SUCCESS:"SUCCESS",FAILURE:"FAILURE"};function N(e){console.log("General message router"),console.log(e),e.type==_.BROADCAST_MESSAGE&&(console.log("I'm going to go process this broadcast"),function(e){e.type==_.BROADCAST_MESSAGE?U(e):e.type==_.DIRECT_MESSAGE&&(e.contentType==j.GROUP_MESSAGE||U(e))}(e)),e.from==_.USER_SERVICE&&S(e)}function I(){if(console.log("Checking Socket Connection"),"undefined"===typeof M){console.log("Connecting to Socket");document.location.host,document.location.pathname;(M=new WebSocket("ws://localhost:8080/prattle/chat/")).onopen=function(){console.log("Connection open!"),!0},M.onclose=function(e){console.log("websocket closing. Code:",e),!1},M.onerror=function(e){console.log("Websocket Error"),console.log("Error Code: ",e.data)},M.onmessage=function(e){console.log("Received Message"),console.log(e.data),N(JSON.parse(e.data))}}}var T=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={value:""},n.handleChange=n.handleChange.bind(Object(h.a)(n)),n.handleLogin=n.handleLogin.bind(Object(h.a)(n)),n.handleCreate=n.handleCreate.bind(Object(h.a)(n)),n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"handleLogin",value:function(e){e.preventDefault();var t=JSON.stringify({type:"USER_SERVICE",contentType:"LOGIN",content:this.state.value});console.log("Logging in as %s",this.state.value),this.props.send(t)}},{key:"handleCreate",value:function(e){e.preventDefault();var t=JSON.stringify({type:"USER_SERVICE",contentType:"USER_CREATE",content:this.state.value});console.log("Creating new user: %s",this.state.value),this.props.send(t)}},{key:"render",value:function(){return null!==this.props.username?s.a.createElement(p.a,{to:"/chat"}):s.a.createElement("div",{className:"section is-fullheight"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"column is-4 is-offset-4"},s.a.createElement("div",{className:"box"},s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"User Name"),s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input",type:"text",name:"username",onChange:this.handleChange}))),s.a.createElement("div",{className:"buttons is-grouped"},s.a.createElement("button",{type:"button",className:"button is-block is-info is-fullwidth",onClick:this.handleLogin},"Login"),s.a.createElement("button",{type:"button",className:"button is-block is-info is-fullwidth",onClick:this.handleCreate},"Create")))))))}}]),t}(s.a.Component),G=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={display:"TautChat"},n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e){if(this.props.username!==e.username){var t="Hi, "+this.props.username+"!";this.setState({display:t})}}},{key:"render",value:function(){return s.a.createElement("header",null,s.a.createElement("h1",null,this.state.display),s.a.createElement(m.b,{to:"/"},"Home")," | "," ",s.a.createElement(m.b,{to:"/about"},"About")," | "," ",s.a.createElement(m.b,{to:"/chat"},"Chat")," | "," ",s.a.createElement(m.b,{to:"/groupchat"},"GroupChat"))}}]),t}(a.Component);function x(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("h1",null,"About"),s.a.createElement("p",null,"This is a to do list app v0.0.1"))}var D=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={ws:"",username:null,active_socket:!1,authenticated:!0,queuedMessage:""},n.connect=function(){var e=n.state.ws;n.state.active_socket;if(console.log("Checking Socket Connection"),""===n.state.ws){console.log("Connecting to Socket");document.location.host,document.location.pathname;e=new WebSocket("ws://localhost:8080/prattle/chat/"),n.setState({ws:e}),e.onopen=function(){console.log("Connection open!"),n.setState({active_socket:!0})},e.onclose=function(e){console.log("websocket closing. Code:",e),n.setState({active_socket:!1}),n.setState({ws:""})},e.onerror=function(e){console.log("Websocket Error"),console.log("Error Code: ",e.data)},e.onmessage=function(e){console.log("Received Message"),console.log(e.data),n.generalMessageRouter(JSON.parse(e.data))}}},n.send=function(e){var t=n.state.ws;n.state.active_socket?t.send(e):(I(),setTimeout((function(){t.send(e)}),500))},n.generalMessageRouter=function(e){console.log("General message router"),console.log(e),"BROADCAST_MESSAGE"==e.type&&(console.log("I'm going to go process this broadcast"),n.chatMessageRouter(e)),"USER_SERVICE"==e.from&&n.userServiveMessageRouter(e)},n.chatMessageRouter=function(e){"BROADCAST_MESSAGE"==e.type?n.processDirectChatMessage(e):"DIRECT_MESSAGE"==e.type&&n.processDirectChatMessage(e)},n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.connect()}},{key:"processDirectChatMessage",value:function(e){console.log("I got something to use"),console.log(e),this.setState({queuedMessage:e})}},{key:"userServiveMessageRouter",value:function(e){"LOGIN"==e.contentType&&this.processLoginResponse(e),"USER_CREATE"==e.contentType&&this.processUserCreateResponse(e)}},{key:"processLoginResponse",value:function(e){e.content.includes("SUCCESS")?(this.setState({username:e.to}),console.log(e),console.log("SUCCESS: User successfully logged into session."),this.setState({authenticated:!0})):e.content.includes("FAILURE")&&console.log("ERROR: User Name Does not Exist. Please Create User First.")}},{key:"processUserCreateResponse",value:function(e){e.content.includes("SUCCESS")?(alert("User successfully created. Please log in to continue"),console.log("User Successfully Created!")):e.content.includes("FAILURE")&&console.log("ERROR: Could Not Create User Name. Please Try Another Name.")}},{key:"render",value:function(){var e=this;return s.a.createElement(m.a,{basename:"prattle"},s.a.createElement("div",{className:"App"},s.a.createElement("div",{className:"container"},s.a.createElement(G,{username:this.state.username}),s.a.createElement(p.b,{exact:!0,path:"/",render:function(t){return s.a.createElement(T,Object.assign({},t,{connect:e.connect,send:e.send,username:e.state.username}))}}),s.a.createElement(p.b,{path:"/about",component:x}),s.a.createElement(p.b,{path:"/chat/:messageWith?",render:function(t){return s.a.createElement(A,Object.assign({},t,{connect:e.connect,send:e.send,username:e.state.username,queuedMessage:e.state.queuedMessage}))}}))))}}]),t}(a.Component);n(69);c.a.render(s.a.createElement(D,null),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.1a6f1d53.chunk.js.map